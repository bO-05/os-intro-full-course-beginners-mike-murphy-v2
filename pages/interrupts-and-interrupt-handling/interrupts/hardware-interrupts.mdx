import { Callout, Steps, Step } from "nextra-theme-docs";

# Hardware Interrupts

Hardware interrupts are signals generated by hardware devices to request attention from the CPU. These interrupts are essential for the proper functioning of an operating system, as they allow the CPU to respond to events and manage resources efficiently.

## Types of Hardware Interrupts

There are two main types of hardware interrupts:

1. **Maskable Interrupts**: These interrupts can be temporarily disabled or masked by the CPU. Examples include keyboard interrupts and timer interrupts.

2. **Non-Maskable Interrupts (NMI)**: These interrupts cannot be disabled or masked by the CPU and require immediate attention. Examples include hardware failure interrupts and power failure interrupts.

## Interrupt Request Line (IRQ)

Hardware devices communicate with the CPU through an interrupt request line (IRQ). Each device is assigned a unique IRQ number, which is used to identify the source of the interrupt.

<Callout type="info">
The number of available IRQ lines varies depending on the architecture and the interrupt controller used.
</Callout>

## Interrupt Handling Process

When a hardware device generates an interrupt, the following steps occur:

<Steps>

### Step 1: Interrupt Generation

The hardware device sends an interrupt signal to the CPU through its assigned IRQ line.

### Step 2: Interrupt Acknowledgment

The CPU acknowledges the interrupt and saves its current state, including the program counter and register values.

### Step 3: Interrupt Vectoring

The CPU determines the source of the interrupt by reading the interrupt vector table, which contains the memory addresses of the interrupt service routines (ISRs) for each IRQ.

### Step 4: Interrupt Service Routine Execution

The CPU jumps to the memory address of the appropriate ISR and executes the routine to handle the interrupt.

### Step 5: Interrupt Completion

After the ISR is executed, the CPU restores its previous state and resumes the interrupted program from where it left off.

</Steps>

## Example: Keyboard Interrupt

When a key is pressed on the keyboard, the following sequence of events occurs:

1. The keyboard controller generates an interrupt signal and sends it to the CPU through its assigned IRQ line (usually IRQ 1).

2. The CPU acknowledges the interrupt, saves its current state, and reads the interrupt vector table to determine the address of the keyboard ISR.

3. The CPU jumps to the keyboard ISR, which reads the scancode of the pressed key from the keyboard controller and translates it into a character or a special function (e.g., Ctrl, Alt, or Shift).

4. The ISR places the character or function into the keyboard buffer and signals the operating system that a key has been pressed.

5. The CPU restores its previous state and resumes the interrupted program.

For more information on interrupt handling, see the [Interrupt Handling](/interrupts-and-interrupt-handling/interrupt-handling) section.